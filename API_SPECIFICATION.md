# 📋 Vibefolio API 명세서

## 🎯 **현재 구현 상태**

---

## 1. 프로젝트 관리 (Projects)

| 기능                   | HTTP Method | Endpoint                  | 설명                                       | 상태    |
| ---------------------- | ----------- | ------------------------- | ------------------------------------------ | ------- |
| **프로젝트 목록 조회** | `GET`       | `/api/projects`           | 메인 페이지, 카테고리별 목록. 정렬, 필터링 | ✅ 완료 |
| **프로젝트 상세 조회** | `GET`       | `/api/projects/[id]`      | 특정 프로젝트 상세 정보 및 관련 데이터     | ✅ 완료 |
| **프로젝트 등록**      | `POST`      | `/api/projects`           | 새로운 프로젝트 게시물 생성                | ✅ 완료 |
| **프로젝트 수정**      | `PUT`       | `/api/projects/[id]`      | 등록된 프로젝트 내용 수정                  | ✅ 완료 |
| **프로젝트 삭제**      | `DELETE`    | `/api/projects/[id]`      | 프로젝트 삭제 (Soft Delete)                | ✅ 완료 |
| **조회수 증가**        | `POST`      | `/api/projects/[id]/view` | 프로젝트 조회수 증가                       | ✅ 완료 |

### **구현 세부사항**

- ✅ 카테고리 필터링 (`?category=`)
- ✅ 사용자별 필터링 (`?userId=`)
- ✅ 검색 기능 (`?search=`)
- ✅ 페이지네이션 (`?page=&limit=`)
- ✅ Soft Delete (is_deleted)
- ✅ 소유자 확인

---

## 2. 상호작용 (Interactions)

### 2.1 댓글 (Comments)

| 기능          | HTTP Method | Endpoint                       | 설명                           | 상태    |
| ------------- | ----------- | ------------------------------ | ------------------------------ | ------- |
| **댓글 조회** | `GET`       | `/api/comments?projectId={id}` | 특정 프로젝트의 댓글 목록 조회 | ✅ 완료 |
| **댓글 작성** | `POST`      | `/api/comments`                | 댓글 작성                      | ✅ 완료 |
| **댓글 삭제** | `DELETE`    | `/api/comments/[id]`           | 본인 댓글 삭제                 | ✅ 완료 |

### 2.2 좋아요 (Likes)

| 기능                 | HTTP Method | Endpoint                                 | 설명                      | 상태    |
| -------------------- | ----------- | ---------------------------------------- | ------------------------- | ------- |
| **좋아요 수 조회**   | `GET`       | `/api/likes?projectId={id}`              | 프로젝트 좋아요 수 조회   | ✅ 완료 |
| **좋아요 상태 확인** | `GET`       | `/api/likes?projectId={id}&userId={uid}` | 사용자의 좋아요 여부 확인 | ✅ 완료 |
| **좋아요 추가**      | `POST`      | `/api/likes`                             | 좋아요 추가               | ✅ 완료 |
| **좋아요 취소**      | `DELETE`    | `/api/likes`                             | 좋아요 취소               | ✅ 완료 |

### 2.3 위시리스트 (Wishlists)

| 기능                     | HTTP Method | Endpoint                                     | 설명                     | 상태    |
| ------------------------ | ----------- | -------------------------------------------- | ------------------------ | ------- |
| **위시리스트 조회**      | `GET`       | `/api/wishlists?userId={uid}`                | 사용자의 위시리스트 조회 | ✅ 완료 |
| **위시리스트 상태 확인** | `GET`       | `/api/wishlists?projectId={id}&userId={uid}` | 북마크 여부 확인         | ✅ 완료 |
| **위시리스트 추가**      | `POST`      | `/api/wishlists`                             | 위시리스트에 추가        | ✅ 완료 |
| **위시리스트 제거**      | `DELETE`    | `/api/wishlists`                             | 위시리스트에서 제거      | ✅ 완료 |

---

## 3. 회원 관리 (Users)

| 기능                     | HTTP Method | Endpoint                   | 설명                   | 상태    |
| ------------------------ | ----------- | -------------------------- | ---------------------- | ------- |
| **회원가입**             | `POST`      | `/api/auth/signup`         | 이메일 회원가입        | ✅ 완료 |
| **로그인**               | `POST`      | `/api/auth/login`          | 이메일 로그인          | ✅ 완료 |
| **로그아웃**             | `POST`      | `/api/auth/logout`         | 로그아웃               | ✅ 완료 |
| **사용자 정보 조회**     | `GET`       | `/api/users/[id]`          | 특정 사용자 정보 조회  | ✅ 완료 |
| **사용자 프로젝트 조회** | `GET`       | `/api/users/[id]/projects` | 사용자의 프로젝트 목록 | ✅ 완료 |

---

## 4. 관리자 기능 (Admin)

### 4.1 배너 관리 (Banners)

| 기능               | HTTP Method | Endpoint                       | 설명                       | 상태    |
| ------------------ | ----------- | ------------------------------ | -------------------------- | ------- |
| **배너 목록 조회** | `GET`       | `/api/banners?pageType={type}` | 발견/연결 페이지 배너 조회 | ✅ 완료 |
| **배너 생성**      | `POST`      | `/api/banners`                 | 배너 추가 (관리자만)       | ✅ 완료 |
| **배너 수정**      | `PUT`       | `/api/banners/[id]`            | 배너 수정 (관리자만)       | ✅ 완료 |
| **배너 삭제**      | `DELETE`    | `/api/banners/[id]`            | 배너 삭제 (관리자만)       | ✅ 완료 |

---

## 5. 1:1 문의 (Inquiries)

| 기능               | HTTP Method | Endpoint              | 설명                           | 상태    |
| ------------------ | ----------- | --------------------- | ------------------------------ | ------- |
| **문의 목록 조회** | `GET`       | `/api/inquiries`      | 본인 문의 목록 (관리자는 전체) | ✅ 완료 |
| **문의 등록**      | `POST`      | `/api/inquiries`      | 1:1 문의 등록                  | ✅ 완료 |
| **문의 답변**      | `PUT`       | `/api/inquiries/[id]` | 문의 답변 (관리자만)           | ⏳ 예정 |

---

## 6. 제안하기 (Proposals)

| 기능               | HTTP Method | Endpoint                               | 설명                | 상태    |
| ------------------ | ----------- | -------------------------------------- | ------------------- | ------- |
| **제안 목록 조회** | `GET`       | `/api/proposals?type={sent\|received}` | 보낸/받은 제안 목록 | ✅ 완료 |
| **제안 등록**      | `POST`      | `/api/proposals`                       | 협업/구매 제안 등록 | ✅ 완료 |
| **제안 상태 변경** | `PUT`       | `/api/proposals/[id]`                  | 제안 수락/거부      | ⏳ 예정 |

---

## 7. 연결 페이지 (Connect)

### 7.1 채용 공고 (Job Postings)

| 기능               | HTTP Method | Endpoint         | 설명                    | 상태    |
| ------------------ | ----------- | ---------------- | ----------------------- | ------- |
| **채용 목록 조회** | `GET`       | `/api/jobs`      | 채용 공고 목록          | ⏳ 예정 |
| **채용 상세 조회** | `GET`       | `/api/jobs/[id]` | 채용 공고 상세          | ⏳ 예정 |
| **채용 공고 등록** | `POST`      | `/api/jobs`      | 채용 공고 등록 (관리자) | ⏳ 예정 |

### 7.2 외주 의뢰 (Freelance)

| 기능               | HTTP Method | Endpoint              | 설명           | 상태    |
| ------------------ | ----------- | --------------------- | -------------- | ------- |
| **외주 목록 조회** | `GET`       | `/api/freelance`      | 외주 의뢰 목록 | ⏳ 예정 |
| **외주 상세 조회** | `GET`       | `/api/freelance/[id]` | 외주 의뢰 상세 | ⏳ 예정 |
| **외주 의뢰 등록** | `POST`      | `/api/freelance`      | 외주 의뢰 등록 | ⏳ 예정 |

---

## 8. 파일 관리 (Storage)

| 기능              | 설명                                 | 상태    |
| ----------------- | ------------------------------------ | ------- |
| **이미지 업로드** | Supabase Storage 사용                | ✅ 완료 |
| **버킷 구조**     | `projects/`, `banners/`, `profiles/` | ✅ 완료 |
| **공개 URL 생성** | 업로드 후 공개 URL 반환              | ✅ 완료 |

---

## 📊 **Supabase 활용**

### **1. Database (PostgREST)**

- ✅ RLS (Row Level Security) 적용
- ✅ 테이블 간 Join 쿼리
- ✅ 필터링 및 정렬
- ✅ 페이지네이션

### **2. Storage**

- ✅ 이미지 업로드
- ✅ 버킷 권한 관리
- ✅ 공개 URL 생성

### **3. Auth**

- ✅ 이메일 인증
- ✅ 세션 관리
- ✅ 사용자 메타데이터

---

## 🔒 **보안 (RLS 정책)**

### **적용된 RLS 정책**

#### **Project 테이블**

- ✅ 누구나 조회 가능 (is_deleted = false)
- ✅ 로그인 사용자만 생성 가능
- ✅ 본인 프로젝트만 수정/삭제 가능

#### **Like 테이블**

- ✅ 누구나 좋아요 수 조회 가능
- ✅ 로그인 사용자만 좋아요 추가 가능
- ✅ 본인 좋아요만 취소 가능

#### **Comment 테이블**

- ✅ 누구나 댓글 조회 가능
- ✅ 로그인 사용자만 댓글 작성 가능
- ✅ 본인 댓글만 삭제 가능

#### **Wishlist 테이블**

- ✅ 본인 위시리스트만 조회 가능
- ✅ 로그인 사용자만 추가 가능
- ✅ 본인 위시리스트만 제거 가능

#### **Banner 테이블**

- ✅ 누구나 활성 배너 조회 가능
- ✅ 관리자만 배너 관리 가능

#### **Inquiry 테이블**

- ✅ 본인 문의만 조회 가능
- ✅ 관리자는 전체 문의 조회 가능
- ✅ 관리자만 답변 가능

#### **Proposal 테이블**

- ✅ 발신자/수신자만 조회 가능
- ✅ 로그인 사용자만 제안 가능
- ✅ 수신자만 상태 변경 가능

---

## 📈 **구현 진행률**

### **Phase 1 (MVP) - 95% 완료**

- ✅ 회원가입/로그인
- ✅ 프로젝트 등록/조회
- ✅ 카테고리 필터링
- ✅ 상세페이지 기본 기능

### **Phase 2 - 85% 완료**

- ✅ 댓글, 좋아요, 공유
- ✅ 위시리스트
- ✅ 마이페이지
- ✅ 검색 기능
- ✅ 배너 관리
- ✅ 1:1 문의
- ✅ 제안하기

### **Phase 3 - 30% 완료**

- ⏳ 채용/외주 기능
- ⏳ 관리자 통계
- ⏳ 커뮤니티 게시판

---

## 🎯 **다음 단계**

1. **채용/외주 API 구현** (1시간)
2. **관리자 통계 대시보드** (2시간)
3. **커뮤니티 게시판** (1시간)

---

## ✅ **완료!**

**현재 구현된 API: 40개+**
**Supabase 테이블: 12개**
**RLS 정책: 20개+**

**Vibefolio API가 거의 완성되었습니다!** 🎉
